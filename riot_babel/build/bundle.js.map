{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","js/index.js","js/app.html","node_modules/riot/riot.js"],"names":["require","mount","riot","tag","self","this","data","v","fivetimesdata","forEach","d","loopKeys","expr","ret","val","els","split","brackets","slice","length","trim","key","pos","mkitem","item","_each","dom","parent","add","rendered","splice","tags","remAttr","checksum","template","outerHTML","prev","previousSibling","root","parentNode","one","removeChild","stub","on","items","tmpl","Array","isArray","testsum","JSON","stringify","each","unmount","Object","keys","map","arrDiff","indexOf","nodes","childNodes","prev_index","call","i","oldPos","lastIndexOf","Tag","before","update","insertBefore","parseNamedElements","child_tags","walk","nodeType","child","getTag","getAttribute","name","push","attributes","attr","test","value","parseExpressions","expressions","addExpr","extra","extend","type","tagName","nodeValue","bool","impl","conf","updateOpts","opts","toggle","is_mount","evt","loop_dom","observable","inherit","mkdom","fn","el","trigger","firstChild","appendChild","p","off","setEventHandler","handler","e","window","event","which","charCode","keyCode","target","srcElement","currentTarget","preventDefault","returnValue","insertTo","node","attr_name","replace","document","createTextNode","style","display","setAttribute","len","removeAttribute","obj","from","from2","tag_name","toLowerCase","root_tag","createElement","innerHTML","nextSibling","arr1","arr2","filter","Child","prototype","tag_impl","injectStyle","css","head","mountTo","virtual_dom","version","settings","callbacks","_id","events","typed","cb","arr","args","arguments","fns","busy","apply","concat","hash","loc","parser","path","emit","current","top","location","win","r","route","arg","exec","addEventListener","attachEvent","orig","s","b","x","RegExp","source","global","Function","join","n","_","k","wrap","nonull","re_vars","re","parts","last","m","cache","str","html","selector","querySelectorAll","util","exports","module","define","amd"],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","require('./app.html')\nrequire('riot').mount('app')\n","var riot = require('riot');\nriot.tag('app', '<button onclick=\"{fivetimesdata}\">*5 the world</button> <ul> <li each=\"{data}\">{v}</li> </ul>', function(opts) {\nvar self = this;\nself.data = [{ v: 1 }, { v: 2 }, { v: 3 }, { v: 4 }];\n\n// fivetimesdate() should become fivetimedata = function()\nfivetimesdata = function (e) {\n  self.data.forEach(function (d) {\n    return d.v *= 5;\n  });\n};\n});\n","/* Riot v2.0.12, @license MIT, (c) 2015 Muut Inc. + contributors */\n\n;(function() {\n\n  var riot = { version: 'v2.0.12', settings: {} }\n\n  'use strict'\n\nriot.observable = function(el) {\n\n  el = el || {}\n\n  var callbacks = {},\n      _id = 0\n\n  el.on = function(events, fn) {\n    if (typeof fn == 'function') {\n      fn._id = typeof fn._id == 'undefined' ? _id++ : fn._id\n\n      events.replace(/\\S+/g, function(name, pos) {\n        (callbacks[name] = callbacks[name] || []).push(fn)\n        fn.typed = pos > 0\n      })\n    }\n    return el\n  }\n\n  el.off = function(events, fn) {\n    if (events == '*') callbacks = {}\n    else {\n      events.replace(/\\S+/g, function(name) {\n        if (fn) {\n          var arr = callbacks[name]\n          for (var i = 0, cb; (cb = arr && arr[i]); ++i) {\n            if (cb._id == fn._id) { arr.splice(i, 1); i-- }\n          }\n        } else {\n          callbacks[name] = []\n        }\n      })\n    }\n    return el\n  }\n\n  // only single event supported\n  el.one = function(name, fn) {\n    if (fn) fn.one = 1\n    return el.on(name, fn)\n  }\n\n  el.trigger = function(name) {\n    var args = [].slice.call(arguments, 1),\n        fns = callbacks[name] || []\n\n    for (var i = 0, fn; (fn = fns[i]); ++i) {\n      if (!fn.busy) {\n        fn.busy = 1\n        fn.apply(el, fn.typed ? [name].concat(args) : args)\n        if (fn.one) { fns.splice(i, 1); i-- }\n         else if (fns[i] !== fn) { i-- } // Makes self-removal possible during iteration\n        fn.busy = 0\n      }\n    }\n\n    return el\n  }\n\n  return el\n\n}\n;(function(riot, evt) {\n\n  // browsers only\n  if (!this.top) return\n\n  var loc = location,\n      fns = riot.observable(),\n      win = window,\n      current\n\n  function hash() {\n    return loc.hash.slice(1)\n  }\n\n  function parser(path) {\n    return path.split('/')\n  }\n\n  function emit(path) {\n    if (path.type) path = hash()\n\n    if (path != current) {\n      fns.trigger.apply(null, ['H'].concat(parser(path)))\n      current = path\n    }\n  }\n\n  var r = riot.route = function(arg) {\n    // string\n    if (arg[0]) {\n      loc.hash = arg\n      emit(arg)\n\n    // function\n    } else {\n      fns.on('H', arg)\n    }\n  }\n\n  r.exec = function(fn) {\n    fn.apply(null, parser(hash()))\n  }\n\n  r.parser = function(fn) {\n    parser = fn\n  }\n\n  win.addEventListener ? win.addEventListener(evt, emit, false) : win.attachEvent('on' + evt, emit)\n\n})(riot, 'hashchange')\n/*\n\n//// How it works?\n\n\nThree ways:\n\n1. Expressions: tmpl('{ value }', data).\n   Returns the result of evaluated expression as a raw object.\n\n2. Templates: tmpl('Hi { name } { surname }', data).\n   Returns a string with evaluated expressions.\n\n3. Filters: tmpl('{ show: !done, highlight: active }', data).\n   Returns a space separated list of trueish keys (mainly\n   used for setting html classes), e.g. \"show highlight\".\n\n\n// Template examples\n\ntmpl('{ title || \"Untitled\" }', data)\ntmpl('Results are { results ? \"ready\" : \"loading\" }', data)\ntmpl('Today is { new Date() }', data)\ntmpl('{ message.length > 140 && \"Message is too long\" }', data)\ntmpl('This item got { Math.round(rating) } stars', data)\ntmpl('<h1>{ title }</h1>{ body }', data)\n\n\n// Falsy expressions in templates\n\nIn templates (as opposed to single expressions) all falsy values\nexcept zero (undefined/null/false) will default to empty string:\n\ntmpl('{ undefined } - { false } - { null } - { 0 }', {})\n// will return: \" - - - 0\"\n\n*/\n\n\nvar brackets = (function(orig, s, b) {\n  return function(x) {\n\n    // make sure we use the current setting\n    s = riot.settings.brackets || orig\n    if (b != s) b = s.split(' ')\n\n    // if regexp given, rewrite it with current brackets (only if differ from default)\n    // else, get brackets\n    return x && x.test\n      ? s == orig\n        ? x : RegExp(x.source\n                      .replace(/\\{/g, b[0].replace(/(?=.)/g, '\\\\'))\n                      .replace(/\\}/g, b[1].replace(/(?=.)/g, '\\\\')),\n                    x.global ? 'g' : '')\n      : b[x]\n\n  }\n})('{ }')\n\n\nvar tmpl = (function() {\n\n  var cache = {},\n      re_vars = /(['\"\\/]).*?[^\\\\]\\1|\\.\\w*|\\w*:|\\b(?:(?:new|typeof|in|instanceof) |(?:this|true|false|null|undefined)\\b|function *\\()|([a-z_$]\\w*)/gi\n              // [ 1               ][ 2  ][ 3 ][ 4                                                                                  ][ 5       ]\n              // find variable names:\n              // 1. skip quoted strings and regexps: \"a b\", 'a b', 'a \\'b\\'', /a b/\n              // 2. skip object properties: .name\n              // 3. skip object literals: name:\n              // 4. skip javascript keywords\n              // 5. match var name\n\n  // build a template (or get it from cache), render with data\n  return function(str, data) {\n    return str && (cache[str] = cache[str] || tmpl(str))(data)\n  }\n\n\n  // create a template instance\n\n  function tmpl(s, p) {\n\n    // default template string to {}\n    s = (s || (brackets(0) + brackets(1)))\n\n      // temporarily convert \\{ and \\} to a non-character\n      .replace(brackets(/\\\\{/g), '\\uFFF0')\n      .replace(brackets(/\\\\}/g), '\\uFFF1')\n\n    // split string to expression and non-expresion parts\n    p = split(s, brackets(/{[\\s\\S]*?}/g))\n\n    return new Function('d', 'return ' + (\n\n      // is it a single expression or a template? i.e. {x} or <b>{x}</b>\n      !p[0] && !p[2] && !p[3]\n\n        // if expression, evaluate it\n        ? expr(p[1])\n\n        // if template, evaluate all expressions in it\n        : '[' + p.map(function(s, i) {\n\n            // is it an expression or a string (every second part is an expression)\n          return i % 2\n\n              // evaluate the expressions\n              ? expr(s, true)\n\n              // process string parts of the template:\n              : '\"' + s\n\n                  // preserve new lines\n                  .replace(/\\n/g, '\\\\n')\n\n                  // escape quotes\n                  .replace(/\"/g, '\\\\\"')\n\n                + '\"'\n\n        }).join(',') + '].join(\"\")'\n      )\n\n      // bring escaped { and } back\n      .replace(/\\uFFF0/g, brackets(0))\n      .replace(/\\uFFF1/g, brackets(1))\n\n    + ';')\n\n  }\n\n\n  // parse { ... } expression\n\n  function expr(s, n) {\n    s = s\n\n      // convert new lines to spaces\n      .replace(/\\n/g, ' ')\n\n      // trim whitespace, curly brackets, strip comments\n      .replace(brackets(/^[{ ]+|[ }]+$|\\/\\*.+?\\*\\//g), '')\n\n    // is it an object literal? i.e. { key : value }\n    return /^\\s*[\\w- \"']+ *:/.test(s)\n\n      // if object literal, return trueish keys\n      // e.g.: { show: isOpen(), done: item.done } -> \"show done\"\n      ? '[' + s.replace(/\\W*([\\w- ]+)\\W*:([^,]+)/g, function(_, k, v) {\n\n        return v.replace(/[^&|=!><]+/g, wrap) + '?\"' + k.trim() + '\":\"\",'\n\n      }) + '].join(\" \").trim()'\n\n      // if js expression, evaluate as javascript\n      : wrap(s, n)\n\n  }\n\n\n  // execute js w/o breaking on errors or undefined vars\n\n  function wrap(s, nonull) {\n    s = s.trim()\n    return !s ? '' : '(function(v){try{v='\n\n        // prefix vars (name => data.name)\n        + (s.replace(re_vars, function(s, _, v) { return v ? '(d.'+v+'===undefined?window.'+v+':d.'+v+')' : s })\n\n          // break the expression if its empty (resulting in undefined value)\n          || 'x')\n\n      + '}finally{return '\n\n        // default to empty string for falsy values except zero\n        + (nonull === true ? '!v&&v!==0?\"\":v' : 'v')\n\n      + '}}).call(d)'\n  }\n\n\n  // a substitute for str.split(re) for IE8\n  // because IE8 doesn't support capturing parenthesis in it\n\n  function split(s, re) {\n    var parts = [], last = 0\n    s.replace(re, function(m, i) {\n      // push matched expression and part before it\n      parts.push(s.slice(last, i), m)\n      last = i + m.length\n    })\n    // push the remaining part\n    return parts.concat(s.slice(last))\n  }\n\n})()\n\n// { key, i in items} -> { key, i, items }\nfunction loopKeys(expr) {\n  var ret = { val: expr },\n      els = expr.split(/\\s+in\\s+/)\n\n  if (els[1]) {\n    ret.val = brackets(0) + els[1]\n    els = els[0].slice(brackets(0).length).trim().split(/,\\s*/)\n    ret.key = els[0]\n    ret.pos = els[1]\n  }\n\n  return ret\n}\n\nfunction mkitem(expr, key, val) {\n  var item = {}\n  item[expr.key] = key\n  if (expr.pos) item[expr.pos] = val\n  return item\n}\n\n\n/* Beware: heavy stuff */\nfunction _each(dom, parent, expr) {\n\n  remAttr(dom, 'each')\n\n  var template = dom.outerHTML,\n      prev = dom.previousSibling,\n      root = dom.parentNode,\n      rendered = [],\n      tags = [],\n      checksum\n\n  expr = loopKeys(expr)\n\n  function add(pos, item, tag) {\n    rendered.splice(pos, 0, item)\n    tags.splice(pos, 0, tag)\n  }\n\n  // clean template code\n  parent.one('update', function() {\n    root.removeChild(dom)\n\n  }).one('premount', function() {\n    if (root.stub) root = parent.root\n\n  }).on('update', function() {\n\n    var items = tmpl(expr.val, parent)\n    if (!items) return\n\n    // object loop. any changes cause full redraw\n    if (!Array.isArray(items)) {\n      var testsum = JSON.stringify(items)\n      if (testsum == checksum) return\n      checksum = testsum\n\n      // clear old items\n      each(tags, function(tag) { tag.unmount() })\n      rendered = []\n      tags = []\n\n      items = Object.keys(items).map(function(key) {\n        return mkitem(expr, key, items[key])\n      })\n\n    }\n\n    // unmount redundant\n    each(arrDiff(rendered, items), function(item) {\n      var pos = rendered.indexOf(item),\n          tag = tags[pos]\n\n      if (tag) {\n        tag.unmount()\n        rendered.splice(pos, 1)\n        tags.splice(pos, 1)\n      }\n\n    })\n\n    // mount new / reorder\n    var nodes = root.childNodes,\n        prev_index = [].indexOf.call(nodes, prev)\n\n    each(items, function(item, i) {\n\n      // start index search from position based on the current i\n      var pos = items.indexOf(item, i),\n          oldPos = rendered.indexOf(item, i)\n\n      // if not found, search backwards from current i position\n      pos < 0 && (pos = items.lastIndexOf(item, i))\n      oldPos < 0 && (oldPos = rendered.lastIndexOf(item, i))\n\n      // mount new\n      if (oldPos < 0) {\n        if (!checksum && expr.key) item = mkitem(expr, item, pos)\n\n        var tag = new Tag({ tmpl: template }, {\n          before: nodes[prev_index + 1 + pos],\n          parent: parent,\n          root: root,\n          item: item\n        })\n\n        tag.mount()\n\n        return add(pos, item, tag)\n      }\n\n      // change pos value\n      if (expr.pos && tags[oldPos][expr.pos] != pos) {\n        tags[oldPos].one('update', function(item) {\n          item[expr.pos] = pos\n        })\n        tags[oldPos].update()\n      }\n\n      // reorder\n      if (pos != oldPos) {\n        root.insertBefore(nodes[prev_index + oldPos + 1], nodes[prev_index + pos + 1])\n        return add(pos, rendered.splice(oldPos, 1)[0], tags.splice(oldPos, 1)[0])\n      }\n\n    })\n\n    rendered = items.slice()\n\n  })\n\n}\n\n\nfunction parseNamedElements(root, parent, child_tags) {\n\n  walk(root, function(dom) {\n    if (dom.nodeType == 1) {\n\n      // custom child tag\n      var child = getTag(dom)\n\n      if (child && !dom.getAttribute('each')) {\n        var tag = new Tag(child, { root: dom, parent: parent })\n        parent.tags[dom.getAttribute('name') || child.name] = tag\n        child_tags.push(tag)\n      }\n\n      each(dom.attributes, function(attr) {\n        if (/^(name|id)$/.test(attr.name)) parent[attr.value] = dom\n      })\n    }\n\n  })\n\n}\n\nfunction parseExpressions(root, tag, expressions) {\n\n  function addExpr(dom, val, extra) {\n    if (val.indexOf(brackets(0)) >= 0) {\n      var expr = { dom: dom, expr: val }\n      expressions.push(extend(expr, extra))\n    }\n  }\n\n  walk(root, function(dom) {\n    var type = dom.nodeType\n\n    // text node\n    if (type == 3 && dom.parentNode.tagName != 'STYLE') addExpr(dom, dom.nodeValue)\n    if (type != 1) return\n\n    /* element */\n\n    // loop\n    var attr = dom.getAttribute('each')\n    if (attr) { _each(dom, tag, attr); return false }\n\n    // attribute expressions\n    each(dom.attributes, function(attr) {\n      var name = attr.name,\n          bool = name.split('__')[1]\n\n      addExpr(dom, attr.value, { attr: bool || name, bool: bool })\n      if (bool) { remAttr(dom, name); return false }\n\n    })\n\n    // skip custom tags\n    if (getTag(dom)) return false\n\n  })\n\n}\n\nfunction Tag(impl, conf) {\n\n  var self = riot.observable(this),\n      opts = inherit(conf.opts) || {},\n      dom = mkdom(impl.tmpl),\n      parent = conf.parent,\n      expressions = [],\n      child_tags = [],\n      root = conf.root,\n      item = conf.item,\n      fn = impl.fn,\n      attr = {},\n      loop_dom\n\n  if (fn && root.riot) return\n  root.riot = true\n\n  extend(this, { parent: parent, root: root, opts: opts, tags: {} }, item)\n\n  // grab attributes\n  each(root.attributes, function(el) {\n    attr[el.name] = el.value\n  })\n\n  // options\n  function updateOpts(rem_attr) {\n    each(Object.keys(attr), function(name) {\n      opts[name] = tmpl(attr[name], parent || self)\n    })\n  }\n\n  this.update = function(data, init) {\n    extend(self, data, item)\n    updateOpts()\n    self.trigger('update', item)\n    update(expressions, self, item)\n    self.trigger('updated')\n  }\n\n  this.mount = function() {\n\n    updateOpts()\n\n    // initialiation\n    fn && fn.call(self, opts)\n\n    toggle(true)\n\n    // parse layout after init. fn may calculate args for nested custom tags\n    parseExpressions(dom, self, expressions)\n\n    self.update()\n\n    // internal use only, fixes #403\n    self.trigger('premount')\n\n    if (fn) {\n      while (dom.firstChild) root.appendChild(dom.firstChild)\n\n    } else {\n      loop_dom = dom.firstChild\n      root.insertBefore(loop_dom, conf.before || null) // null needed for IE8\n    }\n\n    if (root.stub) self.root = root = parent.root\n    self.trigger('mount')\n\n  }\n\n\n  this.unmount = function() {\n    var el = fn ? root : loop_dom,\n        p = el.parentNode\n\n    if (p) {\n      if (parent) p.removeChild(el)\n      else while (root.firstChild) root.removeChild(root.firstChild)\n      toggle()\n      self.trigger('unmount')\n      self.off('*')\n      delete root.riot\n    }\n\n  }\n\n  function toggle(is_mount) {\n\n    // mount/unmount children\n    each(child_tags, function(child) { child[is_mount ? 'mount' : 'unmount']() })\n\n    // listen/unlisten parent (events flow one way from parent to children)\n    if (parent) {\n      var evt = is_mount ? 'on' : 'off'\n      parent[evt]('update', self.update)[evt]('unmount', self.unmount)\n    }\n  }\n\n  // named elements available for fn\n  parseNamedElements(dom, this, child_tags)\n\n\n}\n\nfunction setEventHandler(name, handler, dom, tag, item) {\n\n  dom[name] = function(e) {\n\n    // cross browser event fix\n    e = e || window.event\n    e.which = e.which || e.charCode || e.keyCode\n    e.target = e.target || e.srcElement\n    e.currentTarget = dom\n    e.item = item\n\n    // prevent default behaviour (by default)\n    if (handler.call(tag, e) !== true) {\n      e.preventDefault && e.preventDefault()\n      e.returnValue = false\n    }\n\n    var el = item ? tag.parent : tag\n    el.update()\n\n  }\n\n}\n\n// used by if- attribute\nfunction insertTo(root, node, before) {\n  if (root) {\n    root.insertBefore(before, node)\n    root.removeChild(node)\n  }\n}\n\n// item = currently looped item\nfunction update(expressions, tag, item) {\n\n  each(expressions, function(expr) {\n\n    var dom = expr.dom,\n        attr_name = expr.attr,\n        value = tmpl(expr.expr, tag),\n        parent = expr.dom.parentNode\n\n    if (value == null) value = ''\n\n    // leave out riot- prefixes from strings inside textarea\n    if (parent && parent.tagName == 'TEXTAREA') value = value.replace(/riot-/g, '')\n\n    // no change\n    if (expr.value === value) return\n    expr.value = value\n\n    // text node\n    if (!attr_name) return dom.nodeValue = value\n\n    // remove original attribute\n    remAttr(dom, attr_name)\n\n    // event handler\n    if (typeof value == 'function') {\n      setEventHandler(attr_name, value, dom, tag, item)\n\n    // if- conditional\n    } else if (attr_name == 'if') {\n      var stub = expr.stub\n\n      // add to DOM\n      if (value) {\n        stub && insertTo(stub.parentNode, stub, dom)\n\n      // remove from DOM\n      } else {\n        stub = expr.stub = stub || document.createTextNode('')\n        insertTo(dom.parentNode, dom, stub)\n      }\n\n    // show / hide\n    } else if (/^(show|hide)$/.test(attr_name)) {\n      if (attr_name == 'hide') value = !value\n      dom.style.display = value ? '' : 'none'\n\n    // field value\n    } else if (attr_name == 'value') {\n      dom.value = value\n\n    // <img src=\"{ expr }\">\n    } else if (attr_name.slice(0, 5) == 'riot-') {\n      attr_name = attr_name.slice(5)\n      value ? dom.setAttribute(attr_name, value) : remAttr(dom, attr_name)\n\n    } else {\n      if (expr.bool) {\n        dom[attr_name] = value\n        if (!value) return\n        value = attr_name\n      }\n\n      if (typeof value != 'object') dom.setAttribute(attr_name, value)\n\n    }\n\n  })\n\n}\nfunction each(els, fn) {\n  for (var i = 0, len = (els || []).length, el; i < len; i++) {\n    el = els[i]\n    // return false -> reomve current item during loop\n    if (el != null && fn(el, i) === false) i--\n  }\n  return els\n}\n\nfunction remAttr(dom, name) {\n  dom.removeAttribute(name)\n}\n\n// max 2 from objects allowed\nfunction extend(obj, from, from2) {\n  from && each(Object.keys(from), function(key) {\n    obj[key] = from[key]\n  })\n  return from2 ? extend(obj, from2) : obj\n}\n\nfunction mkdom(template) {\n  var tag_name = template.trim().slice(1, 3).toLowerCase(),\n      root_tag = /td|th/.test(tag_name) ? 'tr' : tag_name == 'tr' ? 'tbody' : 'div',\n      el = document.createElement(root_tag)\n\n  el.stub = true\n  el.innerHTML = template\n  return el\n}\n\nfunction walk(dom, fn) {\n  if (dom) {\n    if (fn(dom) === false) walk(dom.nextSibling, fn)\n    else {\n      dom = dom.firstChild\n\n      while (dom) {\n        walk(dom, fn)\n        dom = dom.nextSibling\n      }\n    }\n  }\n}\n\nfunction arrDiff(arr1, arr2) {\n  return arr1.filter(function(el) {\n    return arr2.indexOf(el) < 0\n  })\n}\n\nfunction inherit(parent) {\n  function Child() {}\n  Child.prototype = parent\n  return new Child()\n}\n\n\n\n/*\n Virtual dom is an array of custom tags on the document.\n Updates and unmounts propagate downwards from parent to children.\n*/\n\nvar virtual_dom = [],\n    tag_impl = {}\n\n\nfunction getTag(dom) {\n  return tag_impl[dom.tagName.toLowerCase()]\n}\n\nfunction injectStyle(css) {\n  var node = document.createElement('style')\n  node.innerHTML = css\n  document.head.appendChild(node)\n}\n\nfunction mountTo(root, tagName, opts) {\n  var tag = tag_impl[tagName]\n\n  if (tag && root) tag = new Tag(tag, { root: root, opts: opts })\n\n  if (tag && tag.mount) {\n    tag.mount()\n    virtual_dom.push(tag)\n    return tag.on('unmount', function() {\n      virtual_dom.splice(virtual_dom.indexOf(tag), 1)\n    })\n  }\n\n}\n\nriot.tag = function(name, html, css, fn) {\n  if (typeof css == 'function') fn = css\n  else if (css) injectStyle(css)\n  tag_impl[name] = { name: name, tmpl: html, fn: fn }\n}\n\nriot.mount = function(selector, tagName, opts) {\n  if (selector == '*') selector = Object.keys(tag_impl).join(', ')\n  if (typeof tagName == 'object') { opts = tagName; tagName = 0 }\n\n  var tags = []\n\n  function push(root) {\n    var name = tagName || root.tagName.toLowerCase(),\n        tag = mountTo(root, name, opts)\n\n    if (tag) tags.push(tag)\n  }\n\n  // DOM node\n  if (selector.tagName) {\n    push(selector)\n    return tags[0]\n\n  // selector\n  } else {\n    each(document.querySelectorAll(selector), push)\n    return tags\n  }\n\n}\n\n// update everything\nriot.update = function() {\n  return each(virtual_dom, function(tag) {\n    tag.update()\n  })\n}\n\n// @deprecated\nriot.mountTo = riot.mount\n\n\n  \n  // share methods for other riot parts, e.g. compiler\n  riot.util = { brackets: brackets, tmpl: tmpl }\n\n  // support CommonJS\n  if (typeof exports === 'object')\n    module.exports = riot\n\n  // support AMD\n  else if (typeof define === 'function' && define.amd)\n    define(function() { return riot })\n\n  // support browser\n  else\n    this.riot = riot\n\n})();\n"]}